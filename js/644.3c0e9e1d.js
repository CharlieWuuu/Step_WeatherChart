"use strict";(self["webpackChunktaiwan_climate"]=self["webpackChunktaiwan_climate"]||[]).push([[644],{7644:function(t,a,e){e.r(a),e.d(a,{default:function(){return C}});var s=e(6768),o=e(4232),n=e(5130);const i=(0,s.Lk)("h1",null,"5. 串接資料與圖表",-1),r={class:"select_container"},l=(0,s.Lk)("p",null,"觀測站：",-1),c=["value"],d={class:"chart-container",style:{position:"relative",width:"350px",height:"500px"}};function h(t,a,e,h,u,p){const g=(0,s.g2)("Bar");return(0,s.uX)(),(0,s.CE)(s.FK,null,[i,(0,s.Lk)("div",r,[l,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=a=>t.selectedStationIndex=a),onChange:a[1]||(a[1]=a=>p.getClimateData(t.selectedStationIndex))},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.Stations,((t,a)=>((0,s.uX)(),(0,s.CE)("option",{value:a,key:a},(0,o.v_)(t.station.StationName),9,c)))),128))],544),[[n.u1,t.selectedStationIndex]]),(0,s.Lk)("p",null,(0,o.v_)("玉山"==t.Stations_Name?"高地氣候":t.chartData.datasets[1].data[0]<18?"副熱帶季風":"熱帶季風"),1)]),(0,s.Lk)("div",d,[t.loaded?((0,s.uX)(),(0,s.Wv)(g,{key:0,class:"Chart",data:t.chartData,options:t.chartOptions,style:{width:"100%",height:"100%"}},null,8,["data","options"])):(0,s.Q3)("",!0)])],64)}var u=e(1010),p=e(6912);p.t1.register(p.hE,p.m_,p.s$,p.E8,p.PP,p.kc,p.FN,p.ZT,p.No);var g={name:"BarChart",components:{Bar:u.yP},data:()=>({selectedStationIndex:0,loaded:!1,Stations:{},chartData:{labels:["1","2","3","4","5","6","7","8","9","10","11","12"],datasets:[{type:"bar",label:"降水量",backgroundColor:"#46A3FF",data:[40,20,78,60,128,170,153,112,80,72,63,12],order:2,yAxisID:"left"},{type:"line",label:"氣溫",backgroundColor:"#FF5151",borderColor:"#FF5151",data:[20,26,28,30,34,35,36,34,28,25,23,21],order:1,yAxisID:"right"}]},chartOptions:{responsive:!0,scales:{left:{position:"left",suggestedMin:0,suggestedMax:1e3,ticks:{stepSize:100}},right:{position:"right",suggestedMin:-10,suggestedMax:40,ticks:{stepSize:10}}}},chartKey:0}),async mounted(){try{await this.getClimateData(22)}catch(t){console.error(t)}},methods:{async getClimateData(t){this.loaded=!1;const a=await fetch("https://opendata.cwa.gov.tw/api/v1/rest/datastore/C-B0027-001?Authorization=CWB-C67AAE13-37AA-4F9D-892F-E25483690887");if(!a.ok)throw new Error("Failed to fetch data");const e=await a.json();this.Stations=e.records.data.surfaceObs.location;const s=e.records.data.surfaceObs.location[t],o=s.station,n=s.stationObsStatistics,i=o.StationName;this.Stations_Name=i;const r=n.Precipitation.monthly.map((t=>parseFloat(t.Accumulation)));this.chartData.datasets[0].data=r;const l=n.AirTemperature.monthly.map((t=>parseFloat(t.Mean)));this.chartData.datasets[1].data=l,console.log(s),this.loaded=!0}}},m=e(1241);const k=(0,m.A)(g,[["render",h]]);var C=k}}]);
//# sourceMappingURL=644.3c0e9e1d.js.map